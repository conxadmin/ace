ws = (cw)
srcRepo = (repo:repo R5 file:/Users/mduduzikeswa/Documents/dev/conxsoft/conxworks/ace/run-client-xworkspace/generated/jars_and_configs/index.xml)
tgtRepo = (repo:repo R5 http://localhost:8080/obr/index.xml)
repo:cp $srcRepo $tgtRepo
$ws impw /Users/mduduzikeswa/Documents/dev/conxsoft/conxworks/ace/run-client-xworkspace/generated /Users/mduduzikeswa/Documents/dev/conxsoft/conxworks/ace/run-client-xworkspace/generated/platform-services-cms.xml
$ws commit


sourceindex = (repo:index /Users/mduduzikeswa/Documents/dev/conxsoft/conxworks/ace/run-client-xworkspace/generated/jars_and_configs)
sourcerepo = (repo:repo R5 $sourceindex)
targetrepo = (repo:repo OBR "http://localhost:8080/obr/index.xml")
releaserepo = (repo:repo OBR "http://repository.amdatu.org/dependencies/index.xml.gz")
echo "Deploying bundles"
deployed = repo:cd $releaserepo $sourcerepo $targetrepo
workspace = (cw)
each $deployed {identity = $it getIdentity; version = $it getVersion; name = "$identity - $version"; url = $it getUrl; mimetype = $it getMimetype; if { (coll:first ($workspace la "(artifactName=$name)")) } { } { if { $mimetype equals "application/xml:osgi-autoconf" } { $workspace ca [ artifactName="$name" url="$url" mimetype="$mimetype" filename="$name" processorPid="org.osgi.deployment.rp.autoconf" ] } { $workspace ca [ artifactName="$name" url="$url" mimetype="$mimetype" Bundle-SymbolicName="$identity" Bundle-Version="$version" ]; echo "Create $name" }} }
$workspace commit
workspace = (cw)
$workspace impw /Users/mduduzikeswa/Documents/dev/conxsoft/conxworks/ace/run-client-xworkspace/generated /Users/mduduzikeswa/Documents/dev/conxsoft/conxworks/ace/run-client-xworkspace/generated/platform-services-cms.xml
$workspace commit